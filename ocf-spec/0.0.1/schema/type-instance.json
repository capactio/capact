{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://projectvoltron.dev/schemas/type-instance.json",
  "type": "object",
  "description": "The root schema comprises the entire JSON document.",
  "required": [
    "ocfVersion",
    "kind",
    "revision",
    "metadata",
    "spec"
  ],
  "properties": {
    "ocfVersion": {
      "$id": "#/properties/ocfVersion",
      "type": "string",
      "const": "0.0.1"
    },
    "kind": {
      "$id": "#/properties/kind",
      "type": "string",
      "enum": [
        "TypeInstance"
      ]
    },
    "revision": {
      "$id": "#/properties/revision",
      "type": "string",
      "minLength": 5,
      "pattern": "^(?:0|[1-9]\\d*)\\.(?:0|[1-9]\\d*)\\.(?:0|[1-9]\\d*)$",
      "description": "Version of the manifest content in the SemVer format."
    },
    "metadata": {
      "type": "object",
      "required": [
        "name",
        "prefix"
      ],
      "properties": {
        "name": {
          "$id": "#/properties/metadata/properties/name",
          "type": "string",
          "description": "The name of OCF manifest that uniquely identifies this object within the entity sub-tree. Must be a non-empty string. We recommend using a CLI-friendly name."
        },
        "prefix": {
          "$comment": "TODO: How to restrict prefix to be set only by controller?",
          "$id": "#/properties/metadata/properties/prefix",
          "type": "string",
          "description": "The prefix value is automatically computed and set when storing manifest in OCH."
        }
      }
    },
    "spec": {
      "$id": "#/properties/spec",
      "type": "object",
      "description": "A container for the TypeInstance specification definition.",
      "required": [
        "typeRef",
        "value"
      ],
      "properties": {
        "typeRef": {
          "$id": "#/properties/spec/properties/createdFrom",
          "type": "string",
          "description": "The full path to the Type form which this instance was created."
        },
        "value": {
          "$id": "#/properties/spec/properties/value",
          "type": "object",
          "description": "Holds the configuration constraints for the given Type. It needs to be valid against the Type JSONSchema."
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
