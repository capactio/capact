apiVersion: 0.1.0
rules:
  cap.interface.database.postgresql.install:0.1.0:
    oneOf:
      - implementationConstraints:
          requires:
            - path: "cap.type.gcp.auth.service-account"
              revision: "0.1.0"
          attributes:
            - path: "cap.attribute.cloud.provider.gcp"
              revision: "0.1.1"
            - path: "cap.core.attribute.workload.stateful"
              revision: "0.1.0"
        injectTypeInstances:
          - id: sample-uuid
            typeRef:
              path: "cap.type.gcp.auth.service-account"
              revision: "0.1.0"
      - implementationConstraints:
          attributes:
            - path: cap.attribute.cloud.provider.aws
      - implementationConstraints:
          exact:
            path: cap.implementation.bitnami.postgresql.install
            revision: 1.0.0

  cap.*: # any other Interface
    oneOf:
      - implementationConstraints:
          requires:
            - path: "cap.core.type.platform.kubernetes"
            # any revision
