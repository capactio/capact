apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: global-output
spec:
  entrypoint: global-output

  templates:
  - name: global-output
    steps:
    - - name: output-global-art
        template: output-global-art
    - - name: consume-global-art
        arguments:
          artifacts:
            - name: art
              from: "{{workflow.outputs.artifacts.global-art}}"
        template: consume-global-art

  # Template which produces a global parameter and artifact
  - name: output-global-art
    container:
      image: alpine:3.7
      command: [sh, -c]
      args: ["sleep 1; echo -n art > /tmp/art.txt; echo -n param > /tmp/param.txt"]
    outputs:
      artifacts:
      - name: hello-art
        path: /tmp/art.txt
        globalName: global-art

  - name: consume-global-art
    inputs:
      artifacts:
      - name: art
        path: /art
    container:
      image: alpine:3.7
      command: [sh, -c]
      args: ["cat /art"]