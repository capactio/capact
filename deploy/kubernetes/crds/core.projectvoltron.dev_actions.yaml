
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.0
  creationTimestamp: null
  name: actions.core.projectvoltron.dev
spec:
  group: core.projectvoltron.dev
  names:
    kind: Action
    listKind: ActionList
    plural: actions
    shortNames:
    - ac
    singular: action
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Interface/Implementation path of the Action
      jsonPath: .spec.path
      name: Path
      type: string
    - description: If the Action is approved to run
      jsonPath: .spec.run
      name: Run
      type: boolean
    - description: Status of the Action
      jsonPath: .status.phase
      name: Status
      type: string
    - description: When the Action was created
      format: date-time
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Action describes user intention to resolve & execute a given
          Interface or Implementation.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ActionSpec contains configuration properties for a given
              Action to execute.
            properties:
              advancedRendering:
                description: AdvancedRendering holds properties related to Action
                  advanced rendering mode.
                properties:
                  enabled:
                    default: false
                    description: Enabled specifies if the advanced rendering mode
                      is enabled.
                    type: boolean
                  renderingIteration:
                    description: RenderingIteration holds properties for rendering
                      iteration in advanced rendering mode.
                    properties:
                      continue:
                        default: false
                        description: Continue specifies the user intention to continue
                          rendering using the provided InputArtifacts in the Action
                          input. User may or may not add additional optional InputArtifacts
                          to the list and continue Action rendering.
                        type: boolean
                    required:
                    - continue
                    type: object
                required:
                - enabled
                type: object
              cancel:
                default: false
                description: Cancel specifies whether the Action execution should
                  be cancelled.
                type: boolean
              dryRun:
                default: false
                description: DryRun specifies whether runner should perform only dry-run
                  action without persisting the resource.
                type: boolean
              input:
                description: Input describes Action input.
                properties:
                  artifacts:
                    description: Artifacts contains input Artifacts passed for Action
                      rendering. It contains both required and optional input Artifacts.
                    items:
                      description: InputArtifact holds input artifact reference, which
                        is in fact TypeInstance.
                      properties:
                        name:
                          description: Name refers to input artifact name used in
                            rendered Action. Name is not unique as there may be multiple
                            artifacts with the same name on different levels of Action
                            workflow.
                          type: string
                        typeInstanceID:
                          description: TypeInstanceID is a unique identifier for the
                            TypeInstance used as input artifact.
                          type: string
                      required:
                      - name
                      - typeInstanceID
                      type: object
                    type: array
                  parameters:
                    description: Parameters holds details about Action input parameters.
                    properties:
                      secretRef:
                        description: SecretRef stores reference to Secret in the same
                          namespace the Action CR is created.
                        properties:
                          name:
                            description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              TODO: Add other useful fields. apiVersion, kind, uid?'
                            type: string
                        type: object
                    required:
                    - secretRef
                    type: object
                type: object
              path:
                description: Path contains full path for Implementation or Interface
                  manifest.
                minLength: 3
                type: string
              renderedActionOverride:
                description: RenderedActionOverride contains optional rendered Action
                  that overrides the one rendered by Engine.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              run:
                default: false
                description: Run specifies whether the Action is approved to be executed.
                  Engine won't execute fully rendered Action until the field is set
                  to `true`. If the Action is not fully rendered, and this field is
                  set to `true`, Engine executes a given Action instantly after it
                  is resolved.
                type: boolean
            required:
            - path
            type: object
          status:
            description: ActionStatus defines the observed state of Action.
            properties:
              cancelledBy:
                description: CancelledBy holds user data which cancelled a given Action.
                properties:
                  extra:
                    additionalProperties:
                      description: ExtraValue masks the value so protobuf can generate
                      items:
                        type: string
                      type: array
                    description: Any additional information provided by the authenticator.
                    type: object
                  groups:
                    description: The names of groups this user is a part of.
                    items:
                      type: string
                    type: array
                  uid:
                    description: A unique value that identifies this user across time.
                      If this user is deleted and another user by the same name is
                      added, they will have different UIDs.
                    type: string
                  username:
                    description: The name that uniquely identifies this user among
                      all active users.
                    type: string
                type: object
              createdBy:
                description: CreatedBy holds user data which created a given Action.
                properties:
                  extra:
                    additionalProperties:
                      description: ExtraValue masks the value so protobuf can generate
                      items:
                        type: string
                      type: array
                    description: Any additional information provided by the authenticator.
                    type: object
                  groups:
                    description: The names of groups this user is a part of.
                    items:
                      type: string
                    type: array
                  uid:
                    description: A unique value that identifies this user across time.
                      If this user is deleted and another user by the same name is
                      added, they will have different UIDs.
                    type: string
                  username:
                    description: The name that uniquely identifies this user among
                      all active users.
                    type: string
                type: object
              lastTransitionTime:
                description: Last time the condition transitioned from one status
                  to another.
                format: date-time
                type: string
              message:
                description: Message provides a readable description of the Action
                  phase.
                type: string
              observedGeneration:
                description: ObservedGeneration reflects the generation of the most
                  recently observed Action.
                format: int64
                type: integer
              output:
                description: Output describes Action output.
                properties:
                  artifacts:
                    description: Artifacts contains output Artifacts information.
                    items:
                      properties:
                        name:
                          description: Name refers to artifact name.
                          type: string
                        typeInstanceID:
                          description: TypeInstanceID is a unique identifier for the
                            TypeInstance used as artifact.
                          type: string
                        typePath:
                          description: TypePath is full path for the Type manifest
                            related to a given artifact (TypeInstance).
                          minLength: 3
                          type: string
                      required:
                      - name
                      - typeInstanceID
                      - typePath
                      type: object
                    type: array
                type: object
              phase:
                default: Initial
                description: ActionPhase describes in which state is the Action to
                  execute.
                enum:
                - Initial
                - BeingRendered
                - AdvancedModeRenderingIteration
                - ReadyToRun
                - Running
                - BeingCancelled
                - Cancelled
                - Succeeded
                - Failed
                type: string
              rendering:
                description: Rendering describes rendering status.
                properties:
                  action:
                    description: Action contains partially or fully rendered Action
                      to be executed.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  advancedRendering:
                    description: AdvancedRendering describes status related to advanced
                      rendering mode.
                    properties:
                      renderingIteration:
                        description: RenderingIteration describes status related to
                          current rendering iteration.
                        properties:
                          inputArtifactsToProvide:
                            description: InputArtifactsToProvide describes which input
                              artifacts might be provided in a given rendering iteration.
                            items:
                              properties:
                                name:
                                  description: Name refers to artifact name.
                                  type: string
                                optional:
                                  default: false
                                  description: Optional highlights that the input
                                    artifact is optional.
                                  type: boolean
                                typeInstanceID:
                                  description: TypeInstanceID is a unique identifier
                                    for the TypeInstance used as artifact.
                                  type: string
                                typePath:
                                  description: TypePath is full path for the Type
                                    manifest related to a given artifact (TypeInstance).
                                  minLength: 3
                                  type: string
                              required:
                              - name
                              - typeInstanceID
                              - typePath
                              type: object
                            type: array
                        type: object
                    type: object
                  input:
                    description: Input contains resolved details of Action input.
                    properties:
                      artifacts:
                        description: Artifacts contains input Artifacts passed for
                          Action rendering. It contains both required and optional
                          input Artifacts.
                        items:
                          properties:
                            name:
                              description: Name refers to artifact name.
                              type: string
                            optional:
                              default: false
                              description: Optional highlights that the input artifact
                                is optional.
                              type: boolean
                            typeInstanceID:
                              description: TypeInstanceID is a unique identifier for
                                the TypeInstance used as artifact.
                              type: string
                            typePath:
                              description: TypePath is full path for the Type manifest
                                related to a given artifact (TypeInstance).
                              minLength: 3
                              type: string
                          required:
                          - name
                          - typeInstanceID
                          - typePath
                          type: object
                        type: array
                      parameters:
                        description: Parameters holds value of the User input parameters.
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                type: object
              runBy:
                description: RunBy holds user data which run a given Action.
                properties:
                  extra:
                    additionalProperties:
                      description: ExtraValue masks the value so protobuf can generate
                      items:
                        type: string
                      type: array
                    description: Any additional information provided by the authenticator.
                    type: object
                  groups:
                    description: The names of groups this user is a part of.
                    items:
                      type: string
                    type: array
                  uid:
                    description: A unique value that identifies this user across time.
                      If this user is deleted and another user by the same name is
                      added, they will have different UIDs.
                    type: string
                  username:
                    description: The name that uniquely identifies this user among
                      all active users.
                    type: string
                type: object
              runner:
                description: Runner holds data related to Runner that runs the Action.
                properties:
                  interface:
                    description: Interface is a full path of Runner Interface manifest.
                    minLength: 3
                    type: string
                  status:
                    description: StatusRef contains reference to resource with arbitrary
                      Runner status data.
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - interface
                type: object
            required:
            - phase
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
